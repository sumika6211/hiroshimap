<div class="col-md-8 col-12 mx-md-auto">

  <% if @post.errors.any? %>
    <div class="errors-message mx-auto">
      <%= @post.errors.count %>件のエラーが発生しました
      <ul>
        <% @post.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <h4>投稿を編集する</h4>

  <%= form_with model: @post, url: post_path, method: :patch do |f| %>
    <div class="field col-md-8 col-12 mb-3">
      <%= f.label :"タイトル" %><br>
      <%= f.text_field :name, class: "form-control" %>
    </div>

    <div class="field col-md-8 col-12 mb-3">
      <%= f.label :"紹介文" %><br>
      <%= f.text_field :introduction, class: "form-control" %>
    </div>

    <div class="field col-md-8 col-12 mb-3">
      <%= f.label :"画像" %><br>
      <%= f.file_field :images, accept: "image/*", multiple: true %>
    </div>

    <div class="selection col-md-8 col-12 mb-3">
      <%= f.label :"スポット選択" %><br>
      <%= f.collection_select :spot_id, Spot.all, :id, :name %>
    </div>

    <div class="collection col-md-8 col-12 mb-3">
      <%= f.label :"ジャンル選択(複数選択可)" %><br>
      <%= f.collection_check_boxes(:genre_ids, Genre.all, :id, :name, include_hidden: false) do |b| %>
        <%= b.label { b.check_box + b.text } %>
      <% end %>
    </div>

    <div class="col-md-8 col-12" data-controller="google-map--form">
      <%= f.label :"キーワードで探す" %><br>
      <%= f.search_field :keyword, data: { google_map__form_target: "keyword" } %><br>

      <%= f.label :"緯度" %>
      <%= f.number_field :latitude, data: { google_map__form_target: "latitude" }, tabindex: -1, readonly: true, class: "looks_disable" %>
      <%= f.label :"経度" %>
      <%= f.number_field :longitude, data: { google_map__form_target: "longitude" }, tabindex: -1, readonly: true, class: "looks_disable"%><br>

      <div data-google-map--form-target="map" style="height:50vh;max-width:100%;"></div>

      <%= f.label :"address" %>
      <%= f.text_field :address, list: "address_list", data: { google_map__form_target: "address" } %><br>
      <datalist id="address_list" data-google-map--form-target="addressList" ></datalist>
    </div>

    <div class="actions col-md-8 col-12 mb-3">
      <%= f.submit "編集完了", class: "btn btn-success" %>
    </div>
  <% end %>

  <%= link_to post_path(@post.id) do %>
    <i class="fa-solid fa-circle-left"></i>戻る
  <% end %>
  <%= link_to post_path(@post.id), method: :delete, "data-confirm" => "本当に削除しますか？" do %>
    <i class="fa-solid fa-trash"></i>削除する
  <% end %>

</div>